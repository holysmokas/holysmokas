var g=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);import{E as w}from"./config-BP2QEZVG.js";/* empty css              */var E=g((S,l)=>{const n={sanitizeText:t=>!t||typeof t!="string"?"":t.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"").trim().slice(0,1e3),sanitizeName:t=>!t||typeof t!="string"?"":t.replace(/[<>\"\'`;\\]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim().slice(0,200),sanitizeEmail:t=>!t||typeof t!="string"?"":t.toLowerCase().replace(/[<>\"\'`;\\]/g,"").trim().slice(0,254),sanitizePhone:t=>!t||typeof t!="string"?"":t.replace(/[^0-9\s\-\(\)\+]/g,"").trim().slice(0,30),sanitizeUrl:t=>{if(!t||typeof t!="string")return"";const a=t.trim();return a.match(/^(javascript|data|vbscript):/i)?"":a.slice(0,2e3)},sanitizeDomain:t=>{if(!t||typeof t!="string")return"";let a=t.toLowerCase().trim();return a=a.replace(/^https?:\/\//,""),a=a.replace(/^www\./,""),a=a.split("/")[0],a=a.replace(/[^a-z0-9\.\-]/g,""),a.slice(0,253)},sanitizeLongText:t=>!t||typeof t!="string"?"":t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:text\/html/gi,"").trim().slice(0,1e4),sanitizeAddress:t=>!t||typeof t!="string"?"":t.replace(/[<>\"\'`;\\]/g,"").replace(/javascript:/gi,"").trim().slice(0,500),detectAttack:t=>!t||typeof t!="string"?!1:[/<script/i,/javascript:/i,/on\w+\s*=/i,/union\s+select/i,/;\s*drop\s+table/i,/;\s*delete\s+from/i,/'\s*or\s+'1'\s*=\s*'1/i,/--\s*$/,/\/\*.*\*\//,/\$\{.*\}/,/\{\{.*\}\}/,/<iframe/i,/<embed/i,/<object/i,/expression\s*\(/i].some(e=>e.test(t))},s={submissions:{},maxSubmissions:3,windowTime:60*1e3,cooldownTime:300*1e3,canSubmit:(t="build_wizard")=>{const a=Date.now(),e=s.submissions[t];return e?e.cooldownUntil&&a<e.cooldownUntil?!1:a-e.windowStart>s.windowTime?(delete s.submissions[t],!0):e.count<s.maxSubmissions:!0},recordSubmission:(t="build_wizard")=>{const a=Date.now();s.submissions[t]||(s.submissions[t]={count:0,windowStart:a});const e=s.submissions[t];a-e.windowStart>s.windowTime&&(e.count=0,e.windowStart=a),e.count++,e.count>=s.maxSubmissions&&(e.cooldownUntil=a+s.cooldownTime)},getRemainingCooldown:(t="build_wizard")=>{const a=s.submissions[t];if(!a?.cooldownUntil)return 0;const e=a.cooldownUntil-Date.now();return e>0?Math.ceil(e/1e3):0}},d={checks:{},maxChecks:10,windowTime:60*1e3,canCheck:()=>{const t=Date.now(),a=d.checks.domain;return a?t-a.windowStart>d.windowTime?(delete d.checks.domain,!0):a.count<d.maxChecks:!0},recordCheck:()=>{const t=Date.now();d.checks.domain||(d.checks.domain={count:0,windowStart:t});const a=d.checks.domain;t-a.windowStart>d.windowTime&&(a.count=0,a.windowStart=t),a.count++}};window.wizardData={currentStep:1,totalSteps:8,package:null,packagePrice:0,domainOption:null,domain:null,domainPrice:0,domainPricing:null,businessName:"",whatYouDo:"",targetAudience:"",tagline:"",businessEmail:"",showBusinessEmail:!0,businessPhone:"",showBusinessPhone:!0,businessAddress:"",showBusinessAddress:!1,businessHours:"",showBusinessHours:!1,socialFacebook:"",socialInstagram:"",socialLinkedin:"",socialTwitter:"",primaryAction:null,features:[],designStyle:null,brandColor:"#10b981",inspirationUrl:"",contentReady:"yes",logoFile:null,additionalNotes:"",fullName:"",email:"",phone:"",contactMethod:"email"};const y={starter:.5,business:.5,shop:.5},p={starter:"Starter",business:"Business",shop:"Small Shop"},D={modern:"Modern & Minimal",bold:"Bold & Colorful",classic:"Classic & Professional",playful:"Playful & Fun"},z={contact:"Contact Me / Get Inquiries",book:"Book Appointments",buy:"Sell Products",hire:"Get Hired / Showcase Work",subscribe:"Build Email List",learn:"Educate & Inform"},f=["Choose Package","Your Domain","About You","Contact Info","Website Goals","Design Style","Your Content","Review & Pay"];function m(t){document.querySelectorAll(".step-content").forEach(i=>{i.classList.remove("active")});const a=document.getElementById(`step${t}`);a&&a.classList.add("active");const e=t/wizardData.totalSteps*100;document.getElementById("progressFill").style.width=`${e}%`,document.getElementById("stepIndicator").textContent=`Step ${t} of ${wizardData.totalSteps}`,document.getElementById("stepName").textContent=f[t-1]||"",t===8&&h(),document.querySelector(".wizard-card")?.scrollIntoView({behavior:"smooth",block:"start"})}window.nextStep=function(){wizardData.currentStep<wizardData.totalSteps&&(wizardData.currentStep++,m(wizardData.currentStep))};window.prevStep=function(){wizardData.currentStep>1&&(wizardData.currentStep--,m(wizardData.currentStep))};window.selectPackage=function(t){wizardData.package=t,wizardData.packagePrice=y[t],document.querySelectorAll(".package-card").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-package="${t}"]`)?.classList.add("selected"),document.getElementById("step1Next").disabled=!1};window.selectDomainOption=function(t){wizardData.domainOption=t,document.querySelectorAll(".domain-option").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-option="${t}"]`)?.classList.add("selected"),document.getElementById("newDomainSearch").style.display=t==="new"?"block":"none",document.getElementById("ownDomainInput").style.display=t==="own"?"block":"none",wizardData.domain=null,wizardData.domainPrice=0,document.getElementById("step2Next").disabled=!0,document.getElementById("domainResult").classList.remove("visible")};window.checkDomainAvailability=async function(){if(!d.canCheck()){alert("Too many domain checks. Please wait a moment.");return}const t=document.getElementById("domainSearchInput"),a=n.sanitizeDomain(t.value);if(!a||a.length<3){alert("Please enter a valid domain name");return}const e=document.getElementById("checkDomainBtn"),i=document.getElementById("domainResult");e.disabled=!0,e.textContent="Checking...",d.recordCheck();try{const r=await(await fetch(w.checkDomain,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:a})})).json();i.classList.add("visible"),r.available?(document.getElementById("domainResultIcon").textContent="âœ“",document.getElementById("domainResultIcon").className="domain-result-icon success",document.getElementById("domainResultTitle").textContent="Domain available!",document.getElementById("domainResultDesc").textContent=`${a} - $${r.price}/year`,wizardData.domain=a,wizardData.domainPrice=r.price||12.99,wizardData.domainPricing=r.pricing||null,document.getElementById("step2Next").disabled=!1):(document.getElementById("domainResultIcon").textContent="âœ—",document.getElementById("domainResultIcon").className="domain-result-icon error",document.getElementById("domainResultTitle").textContent="Domain not available",document.getElementById("domainResultDesc").textContent=r.message||"Try a different name",document.getElementById("step2Next").disabled=!0)}catch(o){console.error("Domain check error:",o),i.classList.add("visible"),document.getElementById("domainResultIcon").textContent="!",document.getElementById("domainResultIcon").className="domain-result-icon error",document.getElementById("domainResultTitle").textContent="Error checking domain",document.getElementById("domainResultDesc").textContent="Please try again"}finally{e.disabled=!1,e.textContent="Check"}};window.validateExistingDomain=function(){const t=document.getElementById("existingDomainInput"),a=n.sanitizeDomain(t.value);a&&a.includes(".")&&a.length>=4?(wizardData.domain=a,wizardData.domainPrice=0,document.getElementById("step2Next").disabled=!1):document.getElementById("step2Next").disabled=!0};window.validateStep3=function(){const t=document.getElementById("businessName").value.trim(),a=document.getElementById("whatYouDo").value.trim(),e=document.getElementById("targetAudience").value.trim();wizardData.businessName=n.sanitizeName(t),wizardData.whatYouDo=n.sanitizeLongText(a),wizardData.targetAudience=n.sanitizeLongText(e),wizardData.tagline=n.sanitizeText(document.getElementById("tagline").value);const i=t.length>=2&&a.length>=10&&e.length>=5;document.getElementById("step3Next").disabled=!i};window.validateStep4=function(){const t=document.getElementById("businessEmail").value.trim(),a=document.getElementById("businessPhone")?.value.trim()||"",e=document.getElementById("businessAddress")?.value.trim()||"",i=document.getElementById("businessHours")?.value.trim()||"";wizardData.businessEmail=n.sanitizeEmail(t),wizardData.businessPhone=n.sanitizePhone(a),wizardData.businessAddress=n.sanitizeAddress(e),wizardData.businessHours=n.sanitizeText(i),wizardData.showBusinessEmail=document.getElementById("showBusinessEmail")?.checked??!0,wizardData.showBusinessPhone=document.getElementById("showBusinessPhone")?.checked??!0,wizardData.showBusinessAddress=document.getElementById("showBusinessAddress")?.checked??!1,wizardData.showBusinessHours=document.getElementById("showBusinessHours")?.checked??!1,wizardData.socialFacebook=n.sanitizeUrl(document.getElementById("socialFacebook")?.value||""),wizardData.socialInstagram=n.sanitizeUrl(document.getElementById("socialInstagram")?.value||""),wizardData.socialLinkedin=n.sanitizeUrl(document.getElementById("socialLinkedin")?.value||""),wizardData.socialTwitter=n.sanitizeUrl(document.getElementById("socialTwitter")?.value||"");const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);document.getElementById("step4Next").disabled=!r};window.selectPrimaryAction=function(t){wizardData.primaryAction=t,document.querySelectorAll(".action-card").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-action="${t}"]`)?.classList.add("selected"),document.getElementById("step5Next").disabled=!1};window.toggleCheckbox=function(t){t.classList.toggle("checked");const a=document.querySelectorAll("#featuresGrid .checkbox-item.checked");wizardData.features=Array.from(a).map(e=>e.dataset.value)};window.selectStyle=function(t){wizardData.designStyle=t,document.querySelectorAll(".style-card").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-style="${t}"]`)?.classList.add("selected"),document.getElementById("step6Next").disabled=!1};window.handleLogoUpload=function(t){const a=t.target.files[0];if(!a)return;if(a.size>5*1024*1024){alert("File is too large. Maximum size is 5MB.");return}if(!a.type.startsWith("image/")){alert("Please upload an image file.");return}wizardData.logoFile=a;const e=new FileReader;e.onload=function(i){document.getElementById("logoPreviewImg").src=i.target.result,document.getElementById("logoPreview").classList.add("visible"),document.getElementById("logoUploadArea").classList.add("has-file")},e.readAsDataURL(a)};window.removeLogo=function(){wizardData.logoFile=null,document.getElementById("logoFile").value="",document.getElementById("logoPreview").classList.remove("visible"),document.getElementById("logoUploadArea").classList.remove("has-file")};window.validateStep8=function(){const t=document.getElementById("fullName").value.trim(),a=document.getElementById("email").value.trim(),e=document.getElementById("phone").value.trim();wizardData.fullName=n.sanitizeName(t),wizardData.email=n.sanitizeEmail(a),wizardData.phone=n.sanitizePhone(e),wizardData.contactMethod=document.getElementById("contactMethod").value;const o=t&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&e.length>=10;document.getElementById("payBtn").disabled=!o};function h(){wizardData.contentReady=document.getElementById("contentReady").value,wizardData.additionalNotes=n.sanitizeLongText(document.getElementById("additionalNotes").value),document.getElementById("reviewPackage").textContent=`${p[wizardData.package]} - $${wizardData.packagePrice}`,document.getElementById("reviewDomain").textContent=wizardData.domain||"Not specified",wizardData.domainOption==="own"?document.getElementById("reviewDomainCostRow").style.display="none":(document.getElementById("reviewDomainCostRow").style.display="flex",document.getElementById("reviewDomainCost").textContent=`$${wizardData.domainPrice}/year`),document.getElementById("reviewBusinessName").textContent=wizardData.businessName;const t=document.getElementById("reviewBusinessEmail");t&&(t.textContent=wizardData.businessEmail||"-"),document.getElementById("reviewPrimaryAction").textContent=z[wizardData.primaryAction]||wizardData.primaryAction,document.getElementById("reviewStyle").textContent=D[wizardData.designStyle]||wizardData.designStyle;const a=wizardData.packagePrice+wizardData.domainPrice;document.getElementById("reviewTotal").textContent=`$${a.toLocaleString()}`}window.processPayment=async function(){if(!s.canSubmit()){const e=s.getRemainingCooldown();alert(`Too many submission attempts. Please try again in ${e} seconds.`);return}if(validateStep4(),!wizardData.package||!wizardData.fullName||!wizardData.email){alert("Please complete all required fields.");return}const t=[wizardData.businessName,wizardData.whatYouDo,wizardData.targetAudience,wizardData.fullName,wizardData.email,wizardData.additionalNotes,wizardData.businessEmail,wizardData.businessAddress].join(" ");if(n.detectAttack(t)){alert("Invalid characters detected. Please review your input.");return}const a=document.getElementById("payBtn");a.innerHTML='<span class="loading-spinner"></span> Processing...',a.disabled=!0,s.recordSubmission();try{const e=new FormData;e.append("package",`${p[wizardData.package]} - $${wizardData.packagePrice}`),e.append("packagePrice",wizardData.packagePrice),e.append("category",wizardData.package),e.append("selectedDomain",wizardData.domain||"N/A"),e.append("domainOption",wizardData.domainOption),e.append("isOwnDomain",(wizardData.domainOption==="own").toString()),e.append("domainPricing",JSON.stringify(wizardData.domainPricing)),e.append("businessName",wizardData.businessName),e.append("whatYouDo",wizardData.whatYouDo),e.append("targetAudience",wizardData.targetAudience),e.append("tagline",wizardData.tagline),e.append("businessDescription",`${wizardData.whatYouDo} Target audience: ${wizardData.targetAudience}`),e.append("industry","auto-detect"),e.append("businessEmail",wizardData.businessEmail),e.append("showBusinessEmail",wizardData.showBusinessEmail),e.append("businessPhone",wizardData.businessPhone),e.append("showBusinessPhone",wizardData.showBusinessPhone),e.append("businessAddress",wizardData.businessAddress),e.append("showBusinessAddress",wizardData.showBusinessAddress),e.append("businessHours",wizardData.businessHours),e.append("showBusinessHours",wizardData.showBusinessHours),e.append("socialFacebook",wizardData.socialFacebook),e.append("socialInstagram",wizardData.socialInstagram),e.append("socialLinkedin",wizardData.socialLinkedin),e.append("socialTwitter",wizardData.socialTwitter);const i={facebook:wizardData.socialFacebook,instagram:wizardData.socialInstagram,linkedin:wizardData.socialLinkedin,twitter:wizardData.socialTwitter};e.append("socialLinks",JSON.stringify(i)),e.append("primaryAction",wizardData.primaryAction),e.append("features",JSON.stringify(wizardData.features));const o=b(wizardData.primaryAction,wizardData.features);e.append("pages",JSON.stringify(o)),e.append("designStyle",wizardData.designStyle),e.append("brandColor",wizardData.brandColor),e.append("inspirationUrl",wizardData.inspirationUrl),e.append("contentReady",wizardData.contentReady),e.append("additionalNotes",wizardData.additionalNotes),wizardData.logoFile&&e.append("logo",wizardData.logoFile),e.append("name",wizardData.fullName),e.append("email",wizardData.email),e.append("phone",wizardData.phone),e.append("contactMethod",wizardData.contactMethod);const r=wizardData.packagePrice+wizardData.domainPrice;e.append("totalCost",r),e.append("timestamp",new Date().toISOString()),e.append("status","pending_payment"),e.append("source","build_wizard"),console.log("ðŸ“¦ Submitting order:",{package:wizardData.package,domain:wizardData.domain,email:wizardData.email,businessEmail:wizardData.businessEmail,primaryAction:wizardData.primaryAction,total:r});const c=await(await fetch(w.createPaymentSession,{method:"POST",body:e})).json();if(c.success)c.requiresPayment===!1?u():c.sessionUrl?window.location.href=c.sessionUrl:u();else throw new Error(c.error||"Payment session creation failed")}catch(e){console.error("Payment error:",e),alert("There was an error processing your request. Please try again or contact us at (415) 691-7085."),a.innerHTML="Pay Now â†’",a.disabled=!1}};function b(t,a){const e=["home"];switch(t){case"contact":case"book":e.push("contact");break;case"buy":e.push("products","contact");break;case"hire":e.push("portfolio","about","contact");break;case"subscribe":e.push("about");break;case"learn":e.push("services","about");break}return a.includes("gallery")&&e.push("gallery"),a.includes("testimonials")&&!e.includes("testimonials")&&e.push("testimonials"),a.includes("blog")&&e.push("blog"),a.includes("team")&&!e.includes("about")&&e.push("about"),a.includes("pricing")&&e.push("pricing"),a.includes("faq")&&e.push("faq"),e.includes("contact")||e.push("contact"),[...new Set(e)]}function u(){document.getElementById("successEmail").textContent=wizardData.email,document.querySelectorAll(".step-content").forEach(t=>{t.classList.remove("active")}),document.getElementById("stepSuccess").classList.add("active"),document.getElementById("progressFill").style.width="100%",document.getElementById("stepIndicator").textContent="Complete!",document.getElementById("stepName").textContent="Order Confirmed"}document.addEventListener("keydown",t=>{if(t.key==="Enter"&&t.target.tagName!=="TEXTAREA"){const e=document.querySelector(".step-content.active")?.querySelector(".btn-wizard:not(.btn-back):not(:disabled)");e&&!e.id?.includes("check")&&e.click()}});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("domainSearchInput");t&&t.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),checkDomainAvailability())});const a=document.getElementById("brandColor");a&&a.addEventListener("input",o=>{wizardData.brandColor=o.target.value});const e=document.getElementById("inspirationUrl");e&&e.addEventListener("input",o=>{wizardData.inspirationUrl=n.sanitizeUrl(o.target.value)});const i=document.getElementById("businessEmail");i&&i.addEventListener("input",()=>{validateStep4()}),m(1)});typeof l<"u"&&l.exports&&(l.exports={SecurityUtils:n,FormRateLimiter:s,DomainCheckLimiter:d})});export default E();
