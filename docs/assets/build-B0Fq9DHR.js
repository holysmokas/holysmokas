var g=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports);import{E as p}from"./config-elnU3pxP.js";/* empty css              */var E=g((B,l)=>{const o={sanitizeText:e=>!e||typeof e!="string"?"":e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"").trim().slice(0,1e3),sanitizeName:e=>!e||typeof e!="string"?"":e.replace(/[<>\"\'`;\\]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim().slice(0,200),sanitizeEmail:e=>!e||typeof e!="string"?"":e.toLowerCase().replace(/[<>\"\'`;\\]/g,"").trim().slice(0,254),sanitizePhone:e=>!e||typeof e!="string"?"":e.replace(/[^0-9\s\-\(\)\+]/g,"").trim().slice(0,30),sanitizeUrl:e=>{if(!e||typeof e!="string")return"";const a=e.trim();return a.match(/^(javascript|data|vbscript):/i)?"":a.slice(0,2e3)},sanitizeDomain:e=>{if(!e||typeof e!="string")return"";let a=e.toLowerCase().trim();return a=a.replace(/^https?:\/\//,""),a=a.replace(/^www\./,""),a=a.split("/")[0],a=a.replace(/[^a-z0-9\.\-]/g,""),a.slice(0,253)},sanitizeLongText:e=>!e||typeof e!="string"?"":e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:text\/html/gi,"").trim().slice(0,1e4),detectAttack:e=>!e||typeof e!="string"?!1:[/<script/i,/javascript:/i,/on\w+\s*=/i,/union\s+select/i,/;\s*drop\s+table/i,/;\s*delete\s+from/i,/'\s*or\s+'1'\s*=\s*'1/i,/--\s*$/,/\/\*.*\*\//,/\$\{.*\}/,/\{\{.*\}\}/,/<iframe/i,/<embed/i,/<object/i,/expression\s*\(/i].some(t=>t.test(e))},i={submissions:{},maxSubmissions:3,windowTime:60*1e3,cooldownTime:300*1e3,canSubmit:(e="build_wizard")=>{const a=Date.now(),t=i.submissions[e];return t?t.cooldownUntil&&a<t.cooldownUntil?!1:a-t.windowStart>i.windowTime?(delete i.submissions[e],!0):t.count<i.maxSubmissions:!0},recordSubmission:(e="build_wizard")=>{const a=Date.now();i.submissions[e]||(i.submissions[e]={count:0,windowStart:a});const t=i.submissions[e];a-t.windowStart>i.windowTime&&(t.count=0,t.windowStart=a),t.count++,t.count>=i.maxSubmissions&&(t.cooldownUntil=a+i.cooldownTime)},getRemainingCooldown:(e="build_wizard")=>{const a=i.submissions[e];if(!a?.cooldownUntil)return 0;const t=a.cooldownUntil-Date.now();return t>0?Math.ceil(t/1e3):0}},r={checks:{},maxChecks:10,windowTime:60*1e3,canCheck:()=>{const e=Date.now(),a=r.checks.domain;return a?e-a.windowStart>r.windowTime?(delete r.checks.domain,!0):a.count<r.maxChecks:!0},recordCheck:()=>{const e=Date.now();r.checks.domain||(r.checks.domain={count:0,windowStart:e});const a=r.checks.domain;e-a.windowStart>r.windowTime&&(a.count=0,a.windowStart=e),a.count++}};window.wizardData={currentStep:1,totalSteps:7,package:null,packagePrice:0,domainOption:null,domain:null,domainPrice:0,domainPricing:null,businessName:"",whatYouDo:"",targetAudience:"",tagline:"",primaryAction:null,features:[],designStyle:null,brandColor:"#10b981",inspirationUrl:"",contentReady:"yes",logoFile:null,additionalNotes:"",fullName:"",email:"",phone:"",contactMethod:"email"};const y={starter:.25,business:.25,shop:.25},w={starter:"Starter",business:"Business",shop:"Small Shop"},f={modern:"Modern & Minimal",bold:"Bold & Colorful",classic:"Classic & Professional",playful:"Playful & Fun"},D={contact:"Contact Me / Get Inquiries",book:"Book Appointments",buy:"Sell Products",hire:"Get Hired / Showcase Work",subscribe:"Build Email List",learn:"Educate & Inform"},z=["Choose Package","Your Domain","About You","Website Goals","Design Style","Your Content","Review & Pay"];function m(e){document.querySelectorAll(".step-content").forEach(n=>{n.classList.remove("active")});const a=document.getElementById(`step${e}`);a&&a.classList.add("active");const t=e/wizardData.totalSteps*100;document.getElementById("progressFill").style.width=`${t}%`,document.getElementById("stepIndicator").textContent=`Step ${e} of ${wizardData.totalSteps}`,document.getElementById("stepName").textContent=z[e-1]||"",e===7&&h(),document.querySelector(".wizard-card")?.scrollIntoView({behavior:"smooth",block:"start"})}window.nextStep=function(){wizardData.currentStep<wizardData.totalSteps&&(wizardData.currentStep++,m(wizardData.currentStep))};window.prevStep=function(){wizardData.currentStep>1&&(wizardData.currentStep--,m(wizardData.currentStep))};window.selectPackage=function(e){wizardData.package=e,wizardData.packagePrice=y[e],document.querySelectorAll(".package-card").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-package="${e}"]`)?.classList.add("selected"),document.getElementById("step1Next").disabled=!1};window.selectDomainOption=function(e){wizardData.domainOption=e,document.querySelectorAll(".domain-option").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-option="${e}"]`)?.classList.add("selected"),document.getElementById("newDomainSearch").style.display=e==="new"?"block":"none",document.getElementById("ownDomainInput").style.display=e==="own"?"block":"none",wizardData.domain=null,wizardData.domainPrice=0,document.getElementById("step2Next").disabled=!0,document.getElementById("domainResult").classList.remove("visible")};window.checkDomainAvailability=async function(){if(!r.canCheck()){alert("Too many domain checks. Please wait a moment.");return}const e=document.getElementById("domainSearchInput"),a=o.sanitizeDomain(e.value);if(!a||a.length<3){alert("Please enter a valid domain name");return}const t=document.getElementById("checkDomainBtn"),n=document.getElementById("domainResult");t.disabled=!0,t.textContent="Checking...",r.recordCheck();try{const d=await(await fetch(p.checkDomain,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:a})})).json();n.classList.add("visible"),d.available?(document.getElementById("domainResultIcon").textContent="âœ“",document.getElementById("domainResultIcon").className="domain-result-icon success",document.getElementById("domainResultTitle").textContent="Domain available!",document.getElementById("domainResultDesc").textContent=`${a} - $${d.price}/year`,wizardData.domain=a,wizardData.domainPrice=d.price||12.99,wizardData.domainPricing=d.pricing||null,document.getElementById("step2Next").disabled=!1):(document.getElementById("domainResultIcon").textContent="âœ—",document.getElementById("domainResultIcon").className="domain-result-icon error",document.getElementById("domainResultTitle").textContent="Domain not available",document.getElementById("domainResultDesc").textContent=d.message||"Try a different name",document.getElementById("step2Next").disabled=!0)}catch(s){console.error("Domain check error:",s),n.classList.add("visible"),document.getElementById("domainResultIcon").textContent="!",document.getElementById("domainResultIcon").className="domain-result-icon error",document.getElementById("domainResultTitle").textContent="Error checking domain",document.getElementById("domainResultDesc").textContent="Please try again"}finally{t.disabled=!1,t.textContent="Check"}};window.validateExistingDomain=function(){const e=document.getElementById("existingDomainInput"),a=o.sanitizeDomain(e.value);a&&a.includes(".")&&a.length>=4?(wizardData.domain=a,wizardData.domainPrice=0,document.getElementById("step2Next").disabled=!1):document.getElementById("step2Next").disabled=!0};window.validateStep3=function(){const e=document.getElementById("businessName").value.trim(),a=document.getElementById("whatYouDo").value.trim(),t=document.getElementById("targetAudience").value.trim();wizardData.businessName=o.sanitizeName(e),wizardData.whatYouDo=o.sanitizeLongText(a),wizardData.targetAudience=o.sanitizeLongText(t),wizardData.tagline=o.sanitizeText(document.getElementById("tagline").value);const n=e.length>=2&&a.length>=10&&t.length>=5;document.getElementById("step3Next").disabled=!n};window.selectPrimaryAction=function(e){wizardData.primaryAction=e,document.querySelectorAll(".action-card").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-action="${e}"]`)?.classList.add("selected"),document.getElementById("step4Next").disabled=!1};window.toggleCheckbox=function(e){e.classList.toggle("checked");const a=document.querySelectorAll("#featuresGrid .checkbox-item.checked");wizardData.features=Array.from(a).map(t=>t.dataset.value)};window.selectStyle=function(e){wizardData.designStyle=e,document.querySelectorAll(".style-card").forEach(a=>{a.classList.remove("selected")}),document.querySelector(`[data-style="${e}"]`)?.classList.add("selected"),document.getElementById("step5Next").disabled=!1};window.handleLogoUpload=function(e){const a=e.target.files[0];if(!a)return;if(a.size>5*1024*1024){alert("File is too large. Maximum size is 5MB.");return}if(!a.type.startsWith("image/")){alert("Please upload an image file.");return}wizardData.logoFile=a;const t=new FileReader;t.onload=function(n){document.getElementById("logoPreviewImg").src=n.target.result,document.getElementById("logoPreview").classList.add("visible"),document.getElementById("logoUploadArea").classList.add("has-file")},t.readAsDataURL(a)};window.removeLogo=function(){wizardData.logoFile=null,document.getElementById("logoFile").value="",document.getElementById("logoPreview").classList.remove("visible"),document.getElementById("logoUploadArea").classList.remove("has-file")};window.validateStep7=function(){const e=document.getElementById("fullName").value.trim(),a=document.getElementById("email").value.trim(),t=document.getElementById("phone").value.trim();wizardData.fullName=o.sanitizeName(e),wizardData.email=o.sanitizeEmail(a),wizardData.phone=o.sanitizePhone(t),wizardData.contactMethod=document.getElementById("contactMethod").value;const s=e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&t.length>=10;document.getElementById("payBtn").disabled=!s,a&&(document.getElementById("reviewEmail").textContent=a)};function h(){wizardData.contentReady=document.getElementById("contentReady").value,wizardData.additionalNotes=o.sanitizeLongText(document.getElementById("additionalNotes").value),document.getElementById("reviewPackage").textContent=`${w[wizardData.package]} - $${wizardData.packagePrice}`,document.getElementById("reviewDomain").textContent=wizardData.domain||"Not specified",wizardData.domainOption==="own"?document.getElementById("reviewDomainCostRow").style.display="none":(document.getElementById("reviewDomainCostRow").style.display="flex",document.getElementById("reviewDomainCost").textContent=`$${wizardData.domainPrice}/year`),document.getElementById("reviewBusinessName").textContent=wizardData.businessName,document.getElementById("reviewPrimaryAction").textContent=D[wizardData.primaryAction]||wizardData.primaryAction,document.getElementById("reviewStyle").textContent=f[wizardData.designStyle]||wizardData.designStyle,document.getElementById("reviewEmail").textContent=wizardData.email||"-";const e=wizardData.packagePrice+wizardData.domainPrice;document.getElementById("reviewTotal").textContent=`$${e.toLocaleString()}`}window.processPayment=async function(){if(!i.canSubmit()){const t=i.getRemainingCooldown();alert(`Too many submission attempts. Please try again in ${t} seconds.`);return}if(!wizardData.package||!wizardData.fullName||!wizardData.email){alert("Please complete all required fields.");return}const e=[wizardData.businessName,wizardData.whatYouDo,wizardData.targetAudience,wizardData.fullName,wizardData.email,wizardData.additionalNotes].join(" ");if(o.detectAttack(e)){alert("Invalid characters detected. Please review your input.");return}const a=document.getElementById("payBtn");a.innerHTML='<span class="loading-spinner"></span> Processing...',a.disabled=!0,i.recordSubmission();try{const t=new FormData;t.append("package",`${w[wizardData.package]} - $${wizardData.packagePrice}`),t.append("packagePrice",wizardData.packagePrice),t.append("category",wizardData.package),t.append("selectedDomain",wizardData.domain||"N/A"),t.append("domainOption",wizardData.domainOption),t.append("isOwnDomain",(wizardData.domainOption==="own").toString()),t.append("domainPricing",JSON.stringify(wizardData.domainPricing)),t.append("businessName",wizardData.businessName),t.append("whatYouDo",wizardData.whatYouDo),t.append("targetAudience",wizardData.targetAudience),t.append("tagline",wizardData.tagline),t.append("businessDescription",`${wizardData.whatYouDo} Target audience: ${wizardData.targetAudience}`),t.append("industry","auto-detect"),t.append("primaryAction",wizardData.primaryAction),t.append("features",JSON.stringify(wizardData.features));const n=b(wizardData.primaryAction,wizardData.features);t.append("pages",JSON.stringify(n)),t.append("designStyle",wizardData.designStyle),t.append("brandColor",wizardData.brandColor),t.append("inspirationUrl",wizardData.inspirationUrl),t.append("contentReady",wizardData.contentReady),t.append("additionalNotes",wizardData.additionalNotes),wizardData.logoFile&&t.append("logo",wizardData.logoFile),t.append("name",wizardData.fullName),t.append("email",wizardData.email),t.append("phone",wizardData.phone),t.append("contactMethod",wizardData.contactMethod);const s=wizardData.packagePrice+wizardData.domainPrice;t.append("totalCost",s),t.append("timestamp",new Date().toISOString()),t.append("status","pending_payment"),t.append("source","build_wizard"),console.log("ðŸ“¦ Submitting order:",{package:wizardData.package,domain:wizardData.domain,email:wizardData.email,primaryAction:wizardData.primaryAction,total:s});const c=await(await fetch(p.createPaymentSession,{method:"POST",body:t})).json();if(c.success)c.requiresPayment===!1?u():c.sessionUrl?window.location.href=c.sessionUrl:u();else throw new Error(c.error||"Payment session creation failed")}catch(t){console.error("Payment error:",t),alert("There was an error processing your request. Please try again or contact us at (415) 691-7085."),a.innerHTML="Pay Now â†’",a.disabled=!1}};function b(e,a){const t=["home"];switch(e){case"contact":case"book":t.push("contact");break;case"buy":t.push("products","contact");break;case"hire":t.push("portfolio","about","contact");break;case"subscribe":t.push("about");break;case"learn":t.push("services","about");break}return a.includes("gallery")&&t.push("gallery"),a.includes("testimonials")&&!t.includes("testimonials")&&t.push("testimonials"),a.includes("blog")&&t.push("blog"),a.includes("team")&&!t.includes("about")&&t.push("about"),a.includes("pricing")&&t.push("pricing"),a.includes("faq")&&t.push("faq"),t.includes("contact")||t.push("contact"),[...new Set(t)]}function u(){document.getElementById("successEmail").textContent=wizardData.email,document.querySelectorAll(".step-content").forEach(e=>{e.classList.remove("active")}),document.getElementById("stepSuccess").classList.add("active"),document.getElementById("progressFill").style.width="100%",document.getElementById("stepIndicator").textContent="Complete!",document.getElementById("stepName").textContent="Order Confirmed"}document.addEventListener("keydown",e=>{if(e.key==="Enter"&&e.target.tagName!=="TEXTAREA"){const t=document.querySelector(".step-content.active")?.querySelector(".btn-wizard:not(.btn-back):not(:disabled)");t&&!t.id?.includes("check")&&t.click()}});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("domainSearchInput");e&&e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),checkDomainAvailability())});const a=document.getElementById("brandColor");a&&a.addEventListener("input",n=>{wizardData.brandColor=n.target.value});const t=document.getElementById("inspirationUrl");t&&t.addEventListener("input",n=>{wizardData.inspirationUrl=o.sanitizeUrl(n.target.value)}),m(1)});typeof l<"u"&&l.exports&&(l.exports={SecurityUtils:o,FormRateLimiter:i,DomainCheckLimiter:r})});export default E();
